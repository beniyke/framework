<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Internal Server Error</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #353935;
            color: #FFFFFF;
            margin: 0;
            padding: 0;
            overflow-y: auto;
            height: auto;
        }

        html, body {
            height: 100%;
        }

        .container {
            width: 80%;
            max-width: 900px;
            margin: 20px auto;
            padding-bottom: 20px;
        }

        .error-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
        }

        .header-title {
            display: flex; 
            align-items: center;
            margin-left: 1rem; /* Added styling for title margin */
        }
        
        .error-title-icon {
            margin-right: 1rem;
        }

        .theme-toggle {
            display: flex;
            align-items: center;
            position: relative;
        }

        .theme-toggle button {
            background-color: transparent;
            border: none;
            color: inherit;
            cursor: pointer;
            margin-right: 1rem;
            font-size: 0.9rem;
        }

        .error-box {
            background-color: #21252B;
            padding: 20px;
            margin-bottom: 1rem;
            transition: background-color 0.3s ease, color 0.3s ease;
            border: 1px solid #353935;
            border-radius: 4px;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
            box-sizing: border-box;
        }
        
        .warning-color {
            fill: rgb(229,0,0);
        }

        .error-color {
            color: rgb(219,46,46);
        }

        .error-box p {
            margin: 0.5rem 0;
            font-size: 1rem;
        }

        .table {
            font-size: .83rem;
            width: 100%;
            margin-bottom: 1rem;
            border-collapse: collapse;
        }

        .table th,
        .table td {
          padding: 0.75rem;
          vertical-align: top;
          border-top: 1px solid #dee2e6;
        }

        .table thead th {
          vertical-align: bottom;
          border-bottom: 2px solid #dee2e6;
        }

        .table-bordered {
          border: 1px solid #f2f2f2;
        }

        .table-bordered th,
        .table-bordered td {
          border: 1px solid #f2f2f2;
        }

        /* Light Mode Styles */
        .light-mode .table {
            background-color: #ffffff;
            color: #353935;
        }

        .light-mode .table th,
        .light-mode .table td {
            border-color: #dee2e6;
        }

        .light-mode .table-hover tbody tr:hover {
            background-color: rgba(0, 0, 0, 0.075);
        }

        .light-mode .table-striped tbody tr:nth-of-type(odd) {
            background-color: #f2f2f2;
        }

        /* Dark Mode Styles */
        .dark-mode .table {
            background-color: #212529;
            color: #f8f9fa;
        }

        .dark-mode .table th,
        .dark-mode .table td {
            border-color: #32383e;
        }

        .dark-mode .table-hover tbody tr:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .dark-mode .table-striped tbody tr:nth-of-type(odd) {
            background-color: #2c3034;
            color: #f8f9fa; 
        }

        .dark-mode .table-striped tbody tr:nth-of-type(even) {
            background-color: #212529;
        }

        .dark-mode .table thead th,
        .dark-mode .table tbody td {
            color: #f8f9fa;
        }

        /* Additional Dark Mode Tweaks */
        .dark-mode .table tbody td,
        .dark-mode .table th {
            border-color: #3a3f44;
        }

        .dark-mode .table-striped tbody tr:hover {
            background-color: rgba(255, 255, 255, 0.15);
        }

        .details {
            margin-top: 1rem;
            font-size: 0.9rem;
            color: #888888;
        }

        .text-grey {
            color: #888888;
        }

        .frames {
            margin-bottom: 1rem;
            font-size: .85rem;
        }

        .frame {
            background-color: #21252B;
            padding: 7px 20px;
            margin-bottom: 1rem;
            transition: background-color 0.3s ease, color 0.3s ease;
            border: 1px solid #353935;
            border-radius: 4px;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
            box-sizing: border-box;
        }

        .pointer {
            cursor: pointer;
        }

        .frame-content {
            display: none;
            overflow-x: auto;
            overflow-y: hidden;
            white-space: nowrap;
            padding: 10px;
            border-radius: 4px;
        }

        .snippet {
            overflow-y: hidden;
            overflow-x: auto;
            white-space: nowrap;
        }

        /* Media query to target mobile devices */
        @media only screen and (max-width: 768px) {
            .frame-content {
                display: none;
                max-width: 100%;
                overflow-x: scroll;
                -webkit-overflow-scrolling: touch;
            }

            .snippet {
                overflow-y: hidden;
                white-space: nowrap;
                max-width: 100%;
                overflow-x: scroll;
            }
        }


        .btn-expand {
            background-color: transparent;
            border: none;
            color: #D19A66;
            cursor: pointer;
            font-size: 0.9rem;
        }

        button:focus {
            outline: none;
        }

        /* Syntax Highlighting */
        .file-content-table {
            width: 100%;
            table-layout: fixed;
        }

        .line-number {
            padding-top: 2px;
            padding-bottom: 2px;
            width: 40px;
            padding-right: 10px;
            text-align: right;
            color: #858585;
            border-right: 1px solid #4a4a4a;
        }

        .highlight {
            background-color: #4E3535; 
            border-left: 3px solid #E06C75; 
        }

        .light-mode .highlight {
            background-color: #FFE4B5; 
            border-left: 3px solid #D19A66;
        }

        .light-mode .line-number {
            border-right: 1px solid #ddd;
        }

        .light-mode .highlight .line-number {
            border-right: none !important; 
        }

        .highlight .line-number {
            border-right: none !important; 
        }

        .code-line {
            padding-top: 2px;
            padding-bottom: 2px;
            padding-left: 10px;
            font-family: 'Fira Code', monospace; 
            white-space: pre;
        }

        /* Theme Toggle Styles */
        .mode-toggle {
            background-color: #2D2D35;
            border-radius: 4px;
            padding: 6px;
            display: inline-block;
            cursor: pointer;
        }

        .mode-toggle span {
            vertical-align: middle;
        }

        /* Light Mode Styles */
        .light-mode {
            background-color: #C3C3C3;
            color: #353935;
        }

        .light-mode .error-box {
            background-color: #FFFFFF;
            color: #353935;
            border: 1px solid #C3C3C3;
            border-radius: 4px;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
            box-sizing: border-box;
        }

        .light-mode .frame {
            background-color: #FFFFFF;
            color: #353935;
            border: 1px solid #C3C3C3;
            border-radius: 4px;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
            box-sizing: border-box;
        }

        .light-mode .mode-toggle span {
            color: #fff;
        }
        
        /* Update for Light Mode Icon Colors */
        .light-mode .warning-color path {
            fill: rgb(229,0,0);
        }
        .light-mode .warning-color circle {
            fill: rgb(255,255,255);
        }

        /* Dark Mode (default) Syntax Highlighting*/
        .php-tag {
            color: #E06C75;
        }

        .php-keyword {
            color: #C678DD;
        }

        .php-variable {
            color: #43A7CE;
        }

        .php-comment {
            color: #7F8C8D;
        }

        .php-string {
            color: #98C379;
        }

        /* Light Mode Syntax Highlighting */
        .light-mode .php-tag {
            color: #FF6347;
        }

        .light-mode .php-keyword {
            color: #0000FF;
        }

        .light-mode .php-variable {
            color: #43A7CE;
        }

        .light-mode .php-comment {
            color: #808080;
        }

        .light-mode .php-string {
            color: #228B22;
        }

    </style>
</head>
<body class="light-mode">
    <div class="container">
        <div class="error-header">
            <h3 class="header-title">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="25" height="25" viewBox="0 0 256 256" xml:space="preserve" class="error-title-icon">
                    <defs></defs><g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)" >
                    <path d="M 45 90 C 20.187 90 0 69.813 0 45 C 0 20.187 20.187 0 45 0 c 24.813 0 45 20.187 45 45 C 90 69.813 69.813 90 45 90 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(229,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" class="warning-color" />
                    <path d="M 45 57.469 L 45 57.469 c -1.821 0 -3.319 -1.434 -3.399 -3.252 L 38.465 23.95 c -0.285 -3.802 2.722 -7.044 6.535 -7.044 h 0 c 3.813 0 6.82 3.242 6.535 7.044 l -3.137 30.267 C 48.319 56.036 46.821 57.469 45 57.469 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(255,255,255); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" class="warning-color" />
                    <circle cx="45" cy="67.67" r="5.42" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(255,255,255); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " class="warning-color" />
                    </g>
                </svg> 
                <span>Internal Server Error</span>
            </h3>
            <div class="theme-toggle">
                <div class="mode-toggle" id="theme-toggle">
                    <span>Light</span>
                </div>
            </div>
        </div>
        <div class="error-box">
            <h2 style="display: flex; align-items: center;" class="error-color">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="25" height="25" viewBox="0 0 256 256" xml:space="preserve" style="margin-right: .5rem;">
                    <defs></defs><g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)" >
                    <path d="M 45 57.469 L 45 57.469 c -1.821 0 -3.319 -1.434 -3.399 -3.252 L 38.465 23.95 c -0.285 -3.802 2.722 -7.044 6.535 -7.044 h 0 c 3.813 0 6.82 3.242 6.535 7.044 l -3.137 30.267 C 48.319 56.036 46.821 57.469 45 57.469 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(229,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" class="warning-color" />
                    <circle cx="45" cy="67.67" r="5.42" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(229,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " class="warning-color" />
                    <path d="M 45 90 C 20.187 90 0 69.813 0 45 C 0 20.187 20.187 0 45 0 c 24.813 0 45 20.187 45 45 C 90 69.813 69.813 90 45 90 z M 45 6 C 23.495 6 6 23.495 6 45 s 17.495 39 39 39 s 39 -17.495 39 -39 S 66.505 6 45 6 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(229,0,0); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" class="warning-color" />
                    </g>
                </svg>
                <span><?=$debug->getSeverity($e)?></span>
            </h2>
            <p><?=$debug->highlightQuotedContent($e->getMessage())?></p>
            <div class="details">
                <p><strong><?=$request->method()?> <?=rtrim($request->host(), '/')?></strong></p>
                <small class="error-color"><strong>PHP <?=PHP_VERSION?></strong></small>
            </div>
        </div>
        
        <?php if ($isLocal):?>
        <div class="frames">
            <div class="frame">
                <div class="snippet">
                <h3><?=ltrim(str_replace(rtrim($basePath, '/'), '', $e->getFile()), '\\')?> : <?=$e->getLine()?></h3>
                <?=$debug->getFileContentWithLineNumbers($e->getFile(), $e->getLine(), 10)?>
                </div>
            </div>
            
            <div class="frame">
                <h3 style="display: flex; align-items: center;" class="pointer" onclick="toggleFrame(this)">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="25" height="25" viewBox="0 0 256 256" xml:space="preserve" style="margin-right:.5rem;">
                        <defs></defs><g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)" >
                        <path d="M 89.566 43.779 L 64.315 12.722 c -0.368 -0.452 -0.92 -0.714 -1.502 -0.714 H 43.293 c -0.747 0 -1.427 0.43 -1.748 1.104 c -0.321 0.674 -0.225 1.473 0.246 2.053 L 66.049 45 L 41.791 74.836 c -0.471 0.579 -0.567 1.378 -0.246 2.053 c 0.321 0.674 1.001 1.104 1.748 1.104 h 19.521 c 0.582 0 1.134 -0.263 1.502 -0.714 l 25.251 -31.057 C 90.145 45.51 90.145 44.49 89.566 43.779 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(206,62,62); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                        <path d="M 48.208 43.779 l -25.25 -31.057 c -0.368 -0.452 -0.919 -0.714 -1.502 -0.714 H 1.936 c -0.747 0 -1.427 0.43 -1.748 1.104 c -0.321 0.674 -0.225 1.473 0.246 2.053 L 24.692 45 L 0.434 74.836 c -0.471 0.579 -0.567 1.378 -0.246 2.053 c 0.321 0.674 1.001 1.104 1.748 1.104 h 19.521 c 0.583 0 1.134 -0.263 1.502 -0.714 l 25.25 -31.057 C 48.786 45.51 48.786 44.49 48.208 43.779 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(206,62,62); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                        </g>
                    </svg> 
                    <span>Stack Trace</span>
                </h3>
                <div class="frame-content">
                    <div class="trace">
                        <?php $trace = $e->getTrace();?>
                        <div style="margin-bottom: 0.5em;">
                            <?php $sn = 0;?>
                            <?php foreach ($trace as $index => $frame):?>
                                <?php if(isset($frame['file'], $frame['line'], $frame['function'])):?>
                                    <div class="snippet" style="margin-bottom: .1rem; font-size: small;">
                                    <h4 class="pointer" onclick="toggleFrame(this)"><?=($sn+=1)?>. <?=ltrim(str_replace(rtrim($basePath, '/'), '', $frame['file']), '\\')?> : <?=$frame['line']?></h4>
                                    <div class="frame-content">
                                    <?=$debug->getFileContentWithLineNumbers($frame['file'], $frame['line'], 3)?></div>
                                    </div>
                                <?php endif?>
                            <?php endforeach?>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="frame">
                <h3 style="display: flex; align-items: center;" class="pointer" onclick="toggleFrame(this)">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="25" height="25" viewBox="0 0 256 256" xml:space="preserve" style="margin-right:.5rem;">
                        <defs></defs><g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)" >
                        <path d="M 89.566 43.779 L 64.315 12.722 c -0.368 -0.452 -0.92 -0.714 -1.502 -0.714 H 43.293 c -0.747 0 -1.427 0.43 -1.748 1.104 c -0.321 0.674 -0.225 1.473 0.246 2.053 L 66.049 45 L 41.791 74.836 c -0.471 0.579 -0.567 1.378 -0.246 2.053 c 0.321 0.674 1.001 1.104 1.748 1.104 h 19.521 c 0.582 0 1.134 -0.263 1.502 -0.714 l 25.251 -31.057 C 90.145 45.51 90.145 44.49 89.566 43.779 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(206,62,62); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                        <path d="M 48.208 43.779 l -25.25 -31.057 c -0.368 -0.452 -0.919 -0.714 -1.502 -0.714 H 1.936 c -0.747 0 -1.427 0.43 -1.748 1.104 c -0.321 0.674 -0.225 1.473 0.246 2.053 L 24.692 45 L 0.434 74.836 c -0.471 0.579 -0.567 1.378 -0.246 2.053 c 0.321 0.674 1.001 1.104 1.748 1.104 h 19.521 c 0.583 0 1.134 -0.263 1.502 -0.714 l 25.25 -31.057 C 48.786 45.51 48.786 44.49 48.208 43.779 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(206,62,62); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                        </g>
                    </svg> 
                    <span>Requests</span>
                </h3>
                <div class="frame-content">
                    <div>
                        <h3>Headers</h3>
                        <table class="table table-striped table-bordered">
                            <tbody>
                                <?php foreach($request->header() as $key => $header):?>
                                <tr>
                                    <td><strong><?=$key?></strong></td>
                                    <td><?=$header?></td>
                                </tr>
                                <?php endforeach;?>
                            </tbody>
                        </table>
                    </div>
                    <div>
                        <h3>Body</h3>
                       <?php $data = $request->all() ? str($request->all())->maskSensitiveData(['password',  'db_', 'mail_', '_key'])->get() : $request->all();?>
                        <?php if(!$data):?>
                            <p>No body data</p>
                        <?php else:?>
                        <table class="table table-striped table-bordered">
                            <tbody>
                                <?php foreach($data as $key => $body):?>
                                <tr>
                                    <td><strong><?=$key?></strong></td>
                                    <td><?=!is_array($body) ? is_object($body) ? var_dump($body) : $body : arr($body)->safeImplode() ?></td>
                                </tr>
                                <?php endforeach;?>
                            </tbody>
                        </table>
                        <?php endif?>
                    </div>
                </div>
            </div>
            <div class="frame">
                <h3 style="display: flex; align-items: center;" class="pointer" onclick="toggleFrame(this)">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="25" height="25" viewBox="0 0 256 256" xml:space="preserve" style="margin-right:.5rem;">
                        <defs></defs><g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)" >
                        <path d="M 89.566 43.779 L 64.315 12.722 c -0.368 -0.452 -0.92 -0.714 -1.502 -0.714 H 43.293 c -0.747 0 -1.427 0.43 -1.748 1.104 c -0.321 0.674 -0.225 1.473 0.246 2.053 L 66.049 45 L 41.791 74.836 c -0.471 0.579 -0.567 1.378 -0.246 2.053 c 0.321 0.674 1.001 1.104 1.748 1.104 h 19.521 c 0.582 0 1.134 -0.263 1.502 -0.714 l 25.251 -31.057 C 90.145 45.51 90.145 44.49 89.566 43.779 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(206,62,62); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                        <path d="M 48.208 43.779 l -25.25 -31.057 c -0.368 -0.452 -0.919 -0.714 -1.502 -0.714 H 1.936 c -0.747 0 -1.427 0.43 -1.748 1.104 c -0.321 0.674 -0.225 1.473 0.246 2.053 L 24.692 45 L 0.434 74.836 c -0.471 0.579 -0.567 1.378 -0.246 2.053 c 0.321 0.674 1.001 1.104 1.748 1.104 h 19.521 c 0.583 0 1.134 -0.263 1.502 -0.714 l 25.25 -31.057 C 48.786 45.51 48.786 44.49 48.208 43.779 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(206,62,62); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                        </g>
                    </svg> 
                    <span>Variables</span>
                </h3>
                <div class="frame-content">
                    <div>
                        <h3>Server/Env</h3>
                        <?php $data = str($request->server())->maskSensitiveData(['password',  'db_', 'mail_', '_key'])->get();?>
                        <?php if(!$data):?>
                            <p>No server data</p>
                        <?php else:?>
                        <table class="table table-striped table-bordered">
                            <tbody>
                                <?php foreach($data as $key => $body):?>
                                <tr>
                                    <td><strong><?=$key?></strong></td>
                                    <td><?=!is_array($body) ? is_object($body) ? var_dump($body) : $body : arr($body)->safeImplode() ?></td>
                                </tr>
                                <?php endforeach;?>
                            </tbody>
                        </table>
                        <?php endif?>
                    </div>
                </div>
            </div>
        </div>
        <?php endif;?>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            function toggleFrame(element) {
                let content = element.nextElementSibling;
                while (content && !content.classList.contains('frame-content')) {
                    content = content.nextElementSibling;
                }

                if (content && content.classList.contains('frame-content')) {
                    content.style.display = (content.style.display === 'block') ? 'none' : 'block';
                }
            }
            
            window.toggleFrame = toggleFrame;

            const themeToggle = document.getElementById('theme-toggle');
            themeToggle.addEventListener('click', function () {
                document.body.classList.toggle('light-mode');
                const themeText = this.querySelector('span');
                if (document.body.classList.contains('light-mode')) {
                    themeText.textContent = 'Light';
                } else {
                    themeText.textContent = 'Dark';
                }
            });
            
            const initialThemeText = themeToggle.querySelector('span');
            if (document.body.classList.contains('light-mode')) {
                 initialThemeText.textContent = 'Light';
            } else {
                 initialThemeText.textContent = 'Dark';
            }
        });
    </script>
</body>
</html>